<?php
if (session_status() === PHP_SESSION_NONE) {
    session_start();
}
require_once __DIR__ . '/db.php';
function getCurrentLanguage() {
    if (isset($_GET['lang']) && in_array($_GET['lang'], ['ru', 'en'])) {
        $lang = $_GET['lang'];
        setLanguage($lang);
        return $lang;
    }
    if (function_exists('isLoggedIn') && isLoggedIn()) {
        $user = getCurrentUser();
        if ($user && isset($user['language']) && !empty($user['language'])) {
            return $user['language'];
        }
    }
    if (isset($_SESSION['language'])) {
        return $_SESSION['language'];
    }
    return 'ru';
}
function setLanguage($lang) {
    $_SESSION['language'] = $lang;
    if (function_exists('isLoggedIn') && isLoggedIn()) {
        $user = getCurrentUser();
        if ($user && isset($user['id'])) {
            try {
                $pdo = getDB()->getConnection();
                $stmt = $pdo->prepare("UPDATE users SET language = ? WHERE id = ?");
                $stmt->execute([$lang, $user['id']]);
            } catch (Exception $e) {
                error_log("Error updating user language: " . $e->getMessage());
            }
        }
    }
}
$translations = [
    'ru' => [
        'site_name' => 'QuestGuideRF',
        'home' => '–ì–ª–∞–≤–Ω–∞—è',
        'routes' => '–≠–∫—Å–∫—É—Ä—Å–∏–∏',
        'photos' => '–§–æ—Ç–æ',
        'payments' => '–ü–æ–∫—É–ø–∫–∏',
        'bank' => '–ë–∞–Ω–∫',
        'achievements' => '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
        'reviews' => '–û—Ç–∑—ã–≤—ã',
        'certificates' => '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã',
        'no_certificates' => '–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤',
        'complete_quest_for_certificate' => '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –∫–≤–µ—Å—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç',
        'view_routes' => '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã',
        'create_certificates_for_completed' => '–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤',
        'create_certificate' => '–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç',
        'creating' => '–°–æ–∑–¥–∞–Ω–∏–µ',
        'created' => '–°–æ–∑–¥–∞–Ω–æ',
<<<<<<< HEAD
        'download_album' => '–°–∫–∞—á–∞—Ç—å –∞–ª—å–±–æ–º',
        'download_certificate' => '–°–∫–∞—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç',
=======
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
        'settings' => '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
        'about' => '–û –Ω–∞—Å',
        'contact' => '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
        'login' => '–í–æ–π—Ç–∏',
        'logout' => '–í—ã–π—Ç–∏',
        'admin_panel' => '–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å',
        'select_city' => '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥',
        'select_route' => '–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç',
        'price' => '–¶–µ–Ω–∞',
        'duration' => '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
        'difficulty' => '–°–ª–æ–∂–Ω–æ—Å—Ç—å',
        'start_quest' => '–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç',
        'view_details' => '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
        'no_routes' => '–ú–∞—Ä—à—Ä—É—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',
        'write_review' => '–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤',
        'rating' => '–†–µ–π—Ç–∏–Ω–≥',
        'your_rating' => '–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞',
        'your_review' => '–í–∞—à –æ—Ç–∑—ã–≤',
        'submit' => '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
        'cancel' => '–û—Ç–º–µ–Ω–∞',
        'points' => '–¢–æ—á–µ–∫',
        'time' => '–í—Ä–µ–º—è',
        'distance' => '–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ',
        'free' => '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ',
        'paid' => '–ü–ª–∞—Ç–Ω–æ',
        'completed' => '–ó–∞–≤–µ—Ä—à–µ–Ω–æ',
        'in_progress' => '–í –ø—Ä–æ—Ü–µ—Å—Å–µ',
        'not_started' => '–ù–µ –Ω–∞—á–∞—Ç–æ',
        'my_stats' => '–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
        'total_routes' => '–í—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤',
        'completed_routes' => '–ó–∞–≤–µ—Ä—à–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤',
        'total_points' => '–í—Å–µ–≥–æ —Ç–æ—á–µ–∫',
        'completed_points' => '–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–æ—á–µ–∫',
        'total_time' => '–û–±—â–µ–µ –≤—Ä–µ–º—è',
        'total_distance' => '–û–±—â–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ',
        'no_data' => '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
        'settings_title' => '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
        'settings_subtitle' => '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏',
        'profile' => '–ü—Ä–æ—Ñ–∏–ª—å',
        'change_avatar' => '–ò–∑–º–µ–Ω–∏—Ç—å',
        'avatar_upload_hint' => '–î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –≤–∞—à–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤–∞—Ç–∞—Ä (–º–∞–∫—Å. 5 –ú–ë).',
        'appearance' => '–í–Ω–µ—à–Ω–∏–π –≤–∏–¥',
        'theme' => '–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è',
        'theme_description' => '–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–µ—Ç–ª—É—é –∏–ª–∏ —Ç—ë–º–Ω—É—é —Ç–µ–º—É',
        'theme_light' => '–°–≤–µ—Ç–ª–∞—è',
        'theme_dark' => '–¢—ë–º–Ω–∞—è',
        'theme_auto' => '–ê–≤—Ç–æ',
        'language_setting' => '–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
        'language_description' => '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–∞–π—Ç–∞ –∏ –±–æ—Ç–∞',
        'language_russian' => '–†—É—Å—Å–∫–∏–π',
        'language_english' => 'English',
        'statistics' => '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
        'registration_date' => '–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:',
        'last_login' => '–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:',
        'telegram_bot' => 'Telegram –±–æ—Ç',
        'telegram_bot_description' => '–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–π—Ç–µ —Å –±–æ—Ç–æ–º –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.',
        'open_bot' => '–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞',
        'logout' => '–í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞',
        'logout_description' => '–í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞.',
        'logout_button' => '–í—ã–π—Ç–∏',
        'uploading' => '–ó–∞–≥—Ä—É–∑–∫–∞...',
        'avatar_updated' => '–ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω!',
        'upload_error' => '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏',
        'file_too_large' => '–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5 –ú–ë',
        'invalid_file_type' => '–†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPG, PNG, GIF, WEBP',
        'hello' => '–ü—Ä–∏–≤–µ—Ç',
        'level' => '–£—Ä–æ–≤–µ–Ω—å',
        'routes_completed' => '–ü—Ä–æ–π–¥–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤',
        'points_completed' => '–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–æ—á–µ–∫',
        'time_in_quests' => '–í—Ä–µ–º—è –≤ –∫–≤–µ—Å—Ç–∞—Ö',
        'achievements' => '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π',
        'active_quests' => '–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã',
        'all_routes' => '–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã',
        'completed_progress' => '–ü—Ä–æ–π–¥–µ–Ω–æ',
        'continue_in_bot' => '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –±–æ—Ç–µ',
        'quick_actions' => '–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è',
        'my_routes' => '–ú–æ–∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏',
        'photos' => '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏',
        'purchases' => '–ü–æ–∫—É–ø–∫–∏',
        'open_bot' => '–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞',
        'reviews_title' => '–û—Ç–∑—ã–≤—ã',
        'reviews_subtitle' => '–ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –Ω–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ –∫–≤–µ—Å—Ç–∞—Ö',
        'total_reviews' => '–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤',
        'routes_with_reviews' => '–ú–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –æ—Ç–∑—ã–≤–∞–º–∏',
        'route_filter' => '–ú–∞—Ä—à—Ä—É—Ç',
        'all_routes_filter' => '–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã',
        'rating_filter' => '–†–µ–π—Ç–∏–Ω–≥',
        'any_rating' => '–õ—é–±–æ–π',
        'search' => '–ù–∞–π—Ç–∏',
        'reset' => '–°–±—Ä–æ—Å–∏—Ç—å',
        'no_reviews' => '–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤',
        'recent_achievements' => '–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
        'all_achievements' => '–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
        'my_routes_title' => '–ú–æ–∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏',
        'my_routes_subtitle' => '–í—Å–µ –≤–∞—à–∏ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –∏ —Ç–µ–∫—É—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã',
        'no_routes_yet' => '–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —ç–∫—Å–∫—É—Ä—Å–∏–π',
        'start_first_adventure' => '–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ–µ –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –≤ –±–æ—Ç–µ!',
        'in_progress' => '–í –ø—Ä–æ—Ü–µ—Å—Å–µ',
        'completed' => '–ó–∞–≤–µ—Ä—à–µ–Ω–æ',
        'abandoned' => '–ü—Ä–µ—Ä–≤–∞–Ω–æ',
        'continue_quest' => '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–≤–µ—Å—Ç',
        'view_details' => '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
        'photos_title' => '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏',
        'photos_subtitle' => '–í–∞—à–∏ —Å–Ω–∏–º–∫–∏ –∏–∑ –∫–≤–µ—Å—Ç–æ–≤',
        'filter_by_route' => '–§–∏–ª—å—Ç—Ä –ø–æ –º–∞—Ä—à—Ä—É—Ç—É:',
        'all_routes_filter' => '–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã',
        'no_photos_yet' => '–ü–æ–∫–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π',
        'start_quest_and_photo' => '–ù–∞—á–Ω–∏—Ç–µ –∫–≤–µ—Å—Ç –∏ –¥–µ–ª–∞–π—Ç–µ —Å–Ω–∏–º–∫–∏!',
        'file_not_found' => '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω',
        'payments_title' => '–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫',
        'payments_subtitle' => '–í—Å–µ –≤–∞—à–∏ –ø–ª–∞—Ç–µ–∂–∏ –∏ –ø–æ–∫—É–ø–∫–∏',
        'total_spent' => '–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ',
        'total_purchases' => '–í—Å–µ–≥–æ –ø–æ–∫—É–ø–æ–∫',
        'no_purchases_yet' => '–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫',
        'buy_first_route' => '–ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –≤ –±–æ—Ç–µ!',
        'payment_id' => 'ID',
        'achievements_title' => '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
        'achievements_subtitle' => '–°–æ–±–∏—Ä–∞–π—Ç–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ø—Ä–æ—Ö–æ–¥—è –∫–≤–µ—Å—Ç—ã',
        'progress' => '–ü—Ä–æ–≥—Ä–µ—Å—Å',
        'achievements_earned' => '–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–æ',
        'earned' => '–ü–æ–ª—É—á–µ–Ω–æ',
        'hidden_achievement' => '–°–∫—Ä—ã—Ç–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
        'task' => '–ó–∞–¥–∞–Ω–∏–µ',
        'min_people' => '–ú–∏–Ω–∏–º—É–º –ª—é–¥–µ–π',
        'started' => '–ù–∞—á–∞—Ç–æ',
        'photos_button' => '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏',
<<<<<<< HEAD
=======
        'pose_required' => '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–∑–∞',
        'pose_hands_up' => '–†—É–∫–∏ –≤–≤–µ—Ä—Ö',
        'pose_heart' => '–°–µ—Ä–¥–µ—á–∫–æ',
        'pose_point' => '–£–∫–∞–∑–∞—Ç—å',
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
        'points' => '—Ç–æ—á–µ–∫',
        'all_routes' => '–í—Å–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏',
        'available_routes' => '–î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏',
        'view_details' => '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
        'start_quest' => '–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç',
        'city' => '–ì–æ—Ä–æ–¥',
        'all_cities' => '–í—Å–µ –≥–æ—Ä–æ–¥–∞',
        'type' => '–¢–∏–ø',
        'all_types' => '–í—Å–µ —Ç–∏–ø—ã',
        'walking' => '–ü–µ—à–∫–æ–º',
        'cycling' => '–ù–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ',
        'any_difficulty' => '–õ—é–±–∞—è',
        'easy' => '–õ–µ–≥–∫–∞—è',
        'medium' => '–°—Ä–µ–¥–Ω—è—è',
        'hard' => '–°–ª–æ–∂–Ω–∞—è',
        'tag' => '–¢–µ–≥',
        'all_tags' => '–í—Å–µ —Ç–µ–≥–∏',
        'sort_by' => '–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ',
        'sort_name' => '–ù–∞–∑–≤–∞–Ω–∏—é',
        'sort_price' => '–¶–µ–Ω–µ',
        'sort_duration' => '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
        'sort_distance' => '–†–∞—Å—Å—Ç–æ—è–Ω–∏—é',
        'order' => '–ü–æ—Ä—è–¥–æ–∫',
        'ascending' => '–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é',
        'descending' => '–ü–æ —É–±—ã–≤–∞–Ω–∏—é',
        'apply_filters' => '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
<<<<<<< HEAD
        'bank_title' => '–ë–∞–Ω–∫ –≥—Ä–æ—à–µ–π',
=======
        'bank_title' => '–ë–∞–Ω–∫ —Ç–æ–∫–µ–Ω–æ–≤',
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
        'bank_subtitle' => '–ë–∞–ª–∞–Ω—Å, –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø–æ–∫—É–ø–∫–∏ —ç–∫—Å–∫—É—Ä—Å–∏–π',
        'bank_balance' => '–ë–∞–ª–∞–Ω—Å',
        'bank_total_deposited' => '–í—Å–µ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–æ',
        'bank_total_spent' => '–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ',
        'bank_total_transferred' => '–í—Å–µ–≥–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ',
        'bank_purchases' => '–ü–æ–∫—É–ø–∫–∏',
<<<<<<< HEAD
        'bank_bot_hint' => '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≥—Ä–æ—à–∏ –∏ –∫—É–ø–∏—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –≤ –±–æ—Ç–µ:',
        'currency_groshi' => '–≥—Ä–æ—à–µ–π',
        'duration_min' => '–º–∏–Ω',
        'duration_h' => '—á',
        'welcome_guest' => '–ü—Ä–∏–≤–µ—Ç, –≥–æ—Å—Ç—å! üëã',
        'sign_in_to_see_stats' => '–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.',
        'sign_in_to_see_balance' => '–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –±–∞–ª–∞–Ω—Å –∏ –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫—É–ø–æ–∫.',
=======
        'bank_bot_hint' => '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–æ–∫–µ–Ω—ã –∏ –∫—É–ø–∏—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –≤ –±–æ—Ç–µ:',
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
    ],
    'en' => [
        'site_name' => 'QuestGuideRF',
        'home' => 'Home',
        'routes' => 'Routes',
        'photos' => 'Photos',
        'payments' => 'Purchases',
        'bank' => 'Bank',
        'achievements' => 'Achievements',
        'reviews' => 'Reviews',
        'certificates' => 'Certificates',
        'no_certificates' => 'You have no certificates yet',
        'complete_quest_for_certificate' => 'Complete a quest to get a certificate',
        'view_routes' => 'View routes',
        'create_certificates_for_completed' => 'Create certificates for completed quests',
        'create_certificate' => 'Create certificate',
        'creating' => 'Creating',
        'created' => 'Created',
<<<<<<< HEAD
        'download_album' => 'Download Album',
        'download_certificate' => 'Download certificate',
=======
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
        'settings' => 'Settings',
        'about' => 'About',
        'contact' => 'Contact',
        'login' => 'Login',
        'logout' => 'Logout',
        'admin_panel' => 'Admin Panel',
        'select_city' => 'Select City',
        'select_route' => 'Select Route',
        'price' => 'Price',
        'duration' => 'Duration',
        'difficulty' => 'Difficulty',
        'start_quest' => 'Start Quest',
        'view_details' => 'View Details',
        'no_routes' => 'No routes found',
        'write_review' => 'Write Review',
        'rating' => 'Rating',
        'your_rating' => 'Your Rating',
        'your_review' => 'Your Review',
        'submit' => 'Submit',
        'cancel' => 'Cancel',
        'points' => 'Points',
        'time' => 'Time',
        'distance' => 'Distance',
        'free' => 'Free',
        'paid' => 'Paid',
        'completed' => 'Completed',
        'in_progress' => 'In Progress',
        'not_started' => 'Not Started',
        'my_stats' => 'My Stats',
        'total_routes' => 'Total Routes',
        'completed_routes' => 'Completed Routes',
        'total_points' => 'Total Points',
        'completed_points' => 'Completed Points',
        'total_time' => 'Total Time',
        'total_distance' => 'Total Distance',
        'no_data' => 'No Data',
        'settings_title' => 'Settings',
        'settings_subtitle' => 'Account and preferences management',
        'profile' => 'Profile',
        'change_avatar' => 'Change',
        'avatar_upload_hint' => 'Data is automatically synced with your Telegram profile. You can upload your own avatar (max. 5 MB).',
        'appearance' => 'Appearance',
        'theme' => 'Theme',
        'theme_description' => 'Choose light or dark theme',
        'theme_light' => 'Light',
        'theme_dark' => 'Dark',
        'theme_auto' => 'Auto',
        'language_setting' => 'Interface Language',
        'language_description' => 'Choose language for website and bot interface',
        'language_russian' => 'Russian',
        'language_english' => 'English',
        'statistics' => 'Statistics',
        'registration_date' => 'Registration Date:',
        'last_login' => 'Last Login:',
        'telegram_bot' => 'Telegram Bot',
        'telegram_bot_description' => 'Interact with the bot to complete quests and earn achievements.',
        'open_bot' => 'Open Bot',
        'logout' => 'Logout',
        'logout_description' => 'You will be redirected to the login page.',
        'logout_button' => 'Logout',
        'uploading' => 'Uploading...',
        'avatar_updated' => 'Avatar updated successfully!',
        'upload_error' => 'Upload Error',
        'file_too_large' => 'File size must not exceed 5 MB',
        'invalid_file_type' => 'Only images allowed: JPG, PNG, GIF, WEBP',
        'hello' => 'Hello',
        'level' => 'Level',
        'routes_completed' => 'Routes Completed',
        'points_completed' => 'Points Completed',
        'time_in_quests' => 'Time in Quests',
        'achievements' => 'Achievements',
        'active_quests' => 'Active Quests',
        'all_routes' => 'All Routes',
        'available_routes' => 'Available Routes',
        'completed_progress' => 'Completed',
        'continue_in_bot' => 'Continue in Bot',
        'quick_actions' => 'Quick Actions',
        'my_routes' => 'My Routes',
        'photos' => 'Photos',
        'purchases' => 'Purchases',
        'open_bot' => 'Open Bot',
        'reviews_title' => 'Reviews',
        'reviews_subtitle' => 'What our users say about quests',
        'total_reviews' => 'Total Reviews',
        'routes_with_reviews' => 'Routes with Reviews',
        'route_filter' => 'Route',
        'all_routes_filter' => 'All Routes',
        'rating_filter' => 'Rating',
        'any_rating' => 'Any',
        'search' => 'Search',
        'reset' => 'Reset',
        'no_reviews' => 'No reviews yet',
        'recent_achievements' => 'Recent Achievements',
        'all_achievements' => 'All Achievements',
        'my_routes_title' => 'My Routes',
        'my_routes_subtitle' => 'All your completed and current routes',
        'no_routes_yet' => 'You have no routes yet',
        'start_first_adventure' => 'Start your first adventure in the bot!',
        'in_progress' => 'In Progress',
        'completed' => 'Completed',
        'abandoned' => 'Abandoned',
        'continue_quest' => 'Continue Quest',
        'view_details' => 'View Details',
        'photos_title' => 'Photos',
        'photos_subtitle' => 'Your photos from quests',
        'filter_by_route' => 'Filter by Route:',
        'all_routes_filter' => 'All Routes',
        'no_photos_yet' => 'No photos yet',
        'start_quest_and_photo' => 'Start a quest and take photos!',
        'file_not_found' => 'File not found',
        'payments_title' => 'Purchase History',
        'payments_subtitle' => 'All your payments and purchases',
        'total_spent' => 'Total Spent',
        'total_purchases' => 'Total Purchases',
        'no_purchases_yet' => 'No purchases yet',
        'buy_first_route' => 'Buy your first route in the bot!',
        'payment_id' => 'ID',
        'achievements_title' => 'Achievements',
        'achievements_subtitle' => 'Collect achievements by completing quests',
        'progress' => 'Progress',
        'achievements_earned' => 'achievements earned',
        'earned' => 'Earned',
        'hidden_achievement' => 'Hidden Achievement',
        'task' => 'Task',
        'min_people' => 'Min People',
        'started' => 'Started',
        'photos_button' => 'Photos',
<<<<<<< HEAD
=======
        'pose_required' => 'Pose Required',
        'pose_hands_up' => 'Hands Up',
        'pose_heart' => 'Heart',
        'pose_point' => 'Point',
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
        'points' => 'points',
        'all_routes' => 'All Available Routes',
        'view_details' => 'View Details',
        'start_quest' => 'Start Quest',
        'city' => 'City',
        'all_cities' => 'All Cities',
        'type' => 'Type',
        'all_types' => 'All Types',
        'walking' => 'Walking',
        'cycling' => 'Cycling',
        'any_difficulty' => 'Any',
        'easy' => 'Easy',
        'medium' => 'Medium',
        'hard' => 'Hard',
        'tag' => 'Tag',
        'all_tags' => 'All Tags',
        'sort_by' => 'Sort By',
        'sort_name' => 'Name',
        'sort_price' => 'Price',
        'sort_duration' => 'Duration',
        'sort_distance' => 'Distance',
        'order' => 'Order',
        'ascending' => 'Ascending',
        'descending' => 'Descending',
        'apply_filters' => 'Apply',
        'bank_title' => 'Token Bank',
        'bank_subtitle' => 'Balance, top-ups and tour purchases',
        'bank_balance' => 'Balance',
        'bank_total_deposited' => 'Total deposited',
        'bank_total_spent' => 'Total spent',
        'bank_total_transferred' => 'Total transferred',
        'bank_purchases' => 'Purchases',
        'bank_bot_hint' => 'Top up, transfer tokens and buy tours in the Telegram bot:',
<<<<<<< HEAD
        'currency_groshi' => 'groshi',
        'duration_min' => 'min',
        'duration_h' => 'h',
        'welcome_guest' => 'Welcome, Guest! üëã',
        'sign_in_to_see_stats' => 'Sign in to see your statistics and achievements.',
        'sign_in_to_see_balance' => 'Sign in to view your balance and purchase history.',
=======
>>>>>>> 2ed20ce8af442d6700b46589978e78c41bb0322c
    ]
];
function t($key, $lang = null) {
    global $translations;
    $lang = $lang ?? getCurrentLanguage();
    return $translations[$lang][$key] ?? $key;
}
function getLocalizedName($item, $lang = null) {
    $lang = $lang ?? getCurrentLanguage();
    if ($lang === 'en' && isset($item['name_en']) && !empty($item['name_en'])) {
        return $item['name_en'];
    }
    return $item['name'] ?? '';
}
function getLocalizedDescription($item, $lang = null) {
    $lang = $lang ?? getCurrentLanguage();
    if ($lang === 'en' && isset($item['description_en']) && !empty($item['description_en'])) {
        return $item['description_en'];
    }
    return $item['description'] ?? '';
}